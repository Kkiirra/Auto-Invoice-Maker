{% extends 'base.html' %}
{% load static %}
{% load i18n %}
{% load static i18n %}
{% block navprofiledash %}
    here
{% endblock navprofiledash %}

{% block content %}
<!--begin::Main-->
<div class="app-main flex-column flex-row-fluid" id="kt_app_main">
    <!--begin::Content wrapper-->
    <div class="d-flex flex-column flex-column-fluid">
		<!--begin::Toolbar-->
		<div id="kt_app_toolbar" class="app-toolbar py-3 py-lg-6">
			<!--begin::Toolbar container-->
			<div id="kt_app_toolbar_container" class="app-container container-xxl d-flex flex-stack">
				<!--begin::Page title-->
				<div class="page-title d-flex flex-column justify-content-center flex-wrap me-3">
					<!--begin::Title-->
					<h1 class="page-heading d-flex text-dark fw-bold fs-3 flex-column justify-content-center my-0">Finance Performance</h1>
					<!--end::Title-->
					<!--begin::Breadcrumb-->
					<ul class="breadcrumb breadcrumb-separatorless fw-semibold fs-7 my-0 pt-1">
						<!--begin::Item-->
						<li class="breadcrumb-item text-muted">Dashboard</li>
						<!--end::Item-->
					</ul>
					<!--end::Breadcrumb-->
				</div>
				<!--end::Page title-->
				<!--begin::Actions-->
				<div class="d-flex align-items-center gap-2 gap-lg-3">
					<!--begin::Daterangepicker(defined in src/js/layout/app.js)-->
					<div data-kt-daterangepicker="true" data-kt-daterangepicker-opens="left" class="btn btn-sm fw-bold bg-body btn-color-gray-700 btn-active-color-primary d-flex align-items-center px-4" data-kt-initialized="1">
											<!--begin::Display range-->
<!--                                            <input type="text" name="daterange" id="daterange" class="form-control"/>-->
                                            <div id="reportrange" class="text-gray-600 fw-bold">
                                                <span></span>
                                            </div>
<span class="svg-icon svg-icon-1 ms-2 me-0">
												<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
													<path opacity="0.3" d="M21 22H3C2.4 22 2 21.6 2 21V5C2 4.4 2.4 4 3 4H21C21.6 4 22 4.4 22 5V21C22 21.6 21.6 22 21 22Z" fill="currentColor"></path>
													<path d="M6 6C5.4 6 5 5.6 5 5V3C5 2.4 5.4 2 6 2C6.6 2 7 2.4 7 3V5C7 5.6 6.6 6 6 6ZM11 5V3C11 2.4 10.6 2 10 2C9.4 2 9 2.4 9 3V5C9 5.6 9.4 6 10 6C10.6 6 11 5.6 11 5ZM15 5V3C15 2.4 14.6 2 14 2C13.4 2 13 2.4 13 3V5C13 5.6 13.4 6 14 6C14.6 6 15 5.6 15 5ZM19 5V3C19 2.4 18.6 2 18 2C17.4 2 17 2.4 17 3V5C17 5.6 17.4 6 18 6C18.6 6 19 5.6 19 5Z" fill="currentColor"></path>
													<path d="M8.8 13.1C9.2 13.1 9.5 13 9.7 12.8C9.9 12.6 10.1 12.3 10.1 11.9C10.1 11.6 10 11.3 9.8 11.1C9.6 10.9 9.3 10.8 9 10.8C8.8 10.8 8.59999 10.8 8.39999 10.9C8.19999 11 8.1 11.1 8 11.2C7.9 11.3 7.8 11.4 7.7 11.6C7.6 11.8 7.5 11.9 7.5 12.1C7.5 12.2 7.4 12.2 7.3 12.3C7.2 12.4 7.09999 12.4 6.89999 12.4C6.69999 12.4 6.6 12.3 6.5 12.2C6.4 12.1 6.3 11.9 6.3 11.7C6.3 11.5 6.4 11.3 6.5 11.1C6.6 10.9 6.8 10.7 7 10.5C7.2 10.3 7.49999 10.1 7.89999 10C8.29999 9.90003 8.60001 9.80003 9.10001 9.80003C9.50001 9.80003 9.80001 9.90003 10.1 10C10.4 10.1 10.7 10.3 10.9 10.4C11.1 10.5 11.3 10.8 11.4 11.1C11.5 11.4 11.6 11.6 11.6 11.9C11.6 12.3 11.5 12.6 11.3 12.9C11.1 13.2 10.9 13.5 10.6 13.7C10.9 13.9 11.2 14.1 11.4 14.3C11.6 14.5 11.8 14.7 11.9 15C12 15.3 12.1 15.5 12.1 15.8C12.1 16.2 12 16.5 11.9 16.8C11.8 17.1 11.5 17.4 11.3 17.7C11.1 18 10.7 18.2 10.3 18.3C9.9 18.4 9.5 18.5 9 18.5C8.5 18.5 8.1 18.4 7.7 18.2C7.3 18 7 17.8 6.8 17.6C6.6 17.4 6.4 17.1 6.3 16.8C6.2 16.5 6.10001 16.3 6.10001 16.1C6.10001 15.9 6.2 15.7 6.3 15.6C6.4 15.5 6.6 15.4 6.8 15.4C6.9 15.4 7.00001 15.4 7.10001 15.5C7.20001 15.6 7.3 15.6 7.3 15.7C7.5 16.2 7.7 16.6 8 16.9C8.3 17.2 8.6 17.3 9 17.3C9.2 17.3 9.5 17.2 9.7 17.1C9.9 17 10.1 16.8 10.3 16.6C10.5 16.4 10.5 16.1 10.5 15.8C10.5 15.3 10.4 15 10.1 14.7C9.80001 14.4 9.50001 14.3 9.10001 14.3C9.00001 14.3 8.9 14.3 8.7 14.3C8.5 14.3 8.39999 14.3 8.39999 14.3C8.19999 14.3 7.99999 14.2 7.89999 14.1C7.79999 14 7.7 13.8 7.7 13.7C7.7 13.5 7.79999 13.4 7.89999 13.2C7.99999 13 8.2 13 8.5 13H8.8V13.1ZM15.3 17.5V12.2C14.3 13 13.6 13.3 13.3 13.3C13.1 13.3 13 13.2 12.9 13.1C12.8 13 12.7 12.8 12.7 12.6C12.7 12.4 12.8 12.3 12.9 12.2C13 12.1 13.2 12 13.6 11.8C14.1 11.6 14.5 11.3 14.7 11.1C14.9 10.9 15.2 10.6 15.5 10.3C15.8 10 15.9 9.80003 15.9 9.70003C15.9 9.60003 16.1 9.60004 16.3 9.60004C16.5 9.60004 16.7 9.70003 16.8 9.80003C16.9 9.90003 17 10.2 17 10.5V17.2C17 18 16.7 18.4 16.2 18.4C16 18.4 15.8 18.3 15.6 18.2C15.4 18.1 15.3 17.8 15.3 17.5Z" fill="currentColor"></path>
												</svg>
											</span>
										</div>
					<!--end::Daterangepicker-->
					<!--begin::Secondary button-->
					<!--end::Secondary button-->
				</div>
				<!--end::Actions-->
			</div>
			<!--end::Toolbar container-->
		</div>
		<!--end::Toolbar-->
        <!--begin::Content-->
        <div id="kt_app_content" class="app-content flex-column-fluid">
            <!--begin::Content container-->
            <div id="kt_app_content_container" class="app-container container-xxl">
				<!--begin::Chart widget 20-->
				<div class="card card-flush h-xl-50" style="margin-bottom:50px">
												<!--begin::Header-->
												<div class="card-header py-5">
													<!--begin::Title-->
													<h3 class="card-title fw-bold text-gray-800">Sales Analytics</h3>
													<!--end::Title-->

												</div>
												<!--end::Header-->
												<!--begin::Card body-->
												<div class="card-body d-flex justify-content-between flex-column pb-0 px-0 pt-1">
													<!--begin::Items-->
													<div class="d-flex flex-wrap d-grid gap-5 px-9 mb-5">
														<!--begin::Item-->
														<div class="me-md-2">
															<!--begin::Statistics-->
															<div class="d-flex mb-2">
																<span class="fs-4 fw-semibold text-gray-400 me-1">$</span>
																<span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ amount_of_income }}</span>
															</div>
															<!--end::Statistics-->
															<!--begin::Description-->
															<span class="fs-6 fw-semibold text-gray-400">Amount of income</span>
															<!--end::Description-->
														</div>
														<!--end::Item-->
														<!--begin::Item-->
														<div class="border-start-dashed border-end-dashed border-1 border-gray-300 px-5 ps-md-10 pe-md-7 me-md-5">
															<!--begin::Statistics-->
															<div class="d-flex mb-2">
																<span class="fs-4 fw-semibold text-gray-400 me-1">$</span>
																<span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ amount_of_expenses }}</span>
															</div>
															<!--end::Statistics-->
															<!--begin::Description-->
															<span class="fs-6 fw-semibold text-gray-400">Amount of disposal</span>
															<!--end::Description-->
														</div>
														<!--end::Item-->
														<!--begin::Item-->
														<div class="m-0">
															<!--begin::Statistics-->
															<div class="d-flex align-items-center mb-2">
																<!--begin::Currency-->
																<span class="fs-4 fw-semibold text-gray-400 align-self-start me-1">$</span>
																<!--end::Currency-->
																<!--begin::Value-->
																<span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ gap }}</span>
																<!--end::Value-->
																<!--begin::Label-->
																{% if amount_of_income > amount_of_expenses %}
																<span class="badge badge-light-success fs-base">
																<!--begin::Svg Icon | path: icons/duotune/arrows/arr067.svg-->
																<span class="svg-icon svg-icon-7 svg-icon-success ms-n1">
																	<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
																		<path opacity="0.5" d="M13 9.59998V21C13 21.6 12.6 22 12 22C11.4 22 11 21.6 11 21V9.59998H13Z" fill="currentColor" />
																		<path d="M5.7071 7.89291C5.07714 8.52288 5.52331 9.60002 6.41421 9.60002H17.5858C18.4767 9.60002 18.9229 8.52288 18.2929 7.89291L12.7 2.3C12.3 1.9 11.7 1.9 11.3 2.3L5.7071 7.89291Z" fill="currentColor" />
																	</svg>
																</span>

																	<!--end::Svg Icon-->{{gap_procent}}%</span>
																{% else %}
																<span class="badge badge-light-danger fs-base">
													<!--begin::Svg Icon | path: icons/duotune/arrows/arr065.svg-->
													<span class="svg-icon svg-icon-5 svg-icon-danger ms-n1">
														<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
															<rect opacity="0.5" x="11" y="18" width="13" height="2" rx="1" transform="rotate(-90 11 18)" fill="currentColor"></rect>
															<path d="M11.4343 15.4343L7.25 11.25C6.83579 10.8358 6.16421 10.8358 5.75 11.25C5.33579 11.6642 5.33579 12.3358 5.75 12.75L11.2929 18.2929C11.6834 18.6834 12.3166 18.6834 12.7071 18.2929L18.25 12.75C18.6642 12.3358 18.6642 11.6642 18.25 11.25C17.8358 10.8358 17.1642 10.8358 16.75 11.25L12.5657 15.4343C12.2533 15.7467 11.7467 15.7467 11.4343 15.4343Z" fill="currentColor"></path>
														</svg>
													</span>
													<!--end::Svg Icon-->{{ gap_procent }}%</span>
																{% endif %}
																<!--end::Label-->
															</div>
															<!--end::Statistics-->
															<!--begin::Description-->
															<span class="fs-6 fw-semibold text-gray-400">Balance</span>
															<!--end::Description-->
														</div>
														<!--end::Item-->
													</div>
													<!--end::Items-->
													<!--begin::Chart-->
													<div id="kt_charts_widget_36" class="min-h-auto ps-4 pe-6" data-kt-chart-info="Revenue" style="height: 300px"></div>
													<!--end::Chart-->
												</div>
												<!--end::Card body-->
											</div>
				<!--end::Chart widget 20-->
				<!--begin::Chart widget 20-->
				<div class="card card-flush h-xl-50">
												<!--begin::Header-->
												<div class="card-header py-5">
													<!--begin::Title-->
													<h3 class="card-title fw-bold text-gray-800">Cashflow analytics</h3>
													<!--end::Title-->
												</div>
												<!--end::Header-->
												<!--begin::Card body-->
												<div class="card-body d-flex justify-content-between flex-column pb-0 px-0 pt-1">
													<!--begin::Items-->
													<div class="d-flex flex-wrap d-grid gap-5 px-9 mb-5">
														<!--begin::Item-->
														<div class="me-md-2">
															<!--begin::Statistics-->
															<div class="d-flex mb-2">
																<span class="fs-4 fw-semibold text-gray-400 me-1">$</span>
																<span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ total_order_value|floatformat:2 }}</span>
															</div>
															<!--end::Statistics-->
															<!--begin::Description-->
															<span class="fs-6 fw-semibold text-gray-400">Total order value</span>
															<!--end::Description-->
														</div>
														<!--end::Item-->
														<!--begin::Item-->
														<div class="border-start-dashed border-end-dashed border-1 border-gray-300 px-5 ps-md-10 pe-md-7 me-md-5">
															<!--begin::Statistics-->
															<div class="d-flex mb-2">
																<span class="fs-4 fw-semibold text-gray-400 me-1">$</span>
																<span class="fs-2hx fw-bold text-gray-800 me-2 lh-1 ls-n2">{{ average_order_value|floatformat:2 }}</span>
															</div>
															<!--end::Statistics-->
															<!--begin::Description-->
															<span class="fs-6 fw-semibold text-gray-400">Average order value</span>
															<!--end::Description-->
														</div>
														<!--end::Item-->

													</div>
													<!--end::Items-->
													<!--begin::Chart-->
													<div id="kt_charts_widget_20" class="min-h-auto ps-4 pe-6" data-kt-chart-info="Order" style="height: 300px"></div>
													<!--end::Chart-->
												</div>
												<!--end::Card body-->
											</div>
				<!--end::Chart widget 20-->
            </div>
            <!--end::Content container-->
        </div>
        <!--end::Content-->
    </div>
    <!--end::Content wrapper-->

</div>
<!--end:::Main-->
{% endblock content %}
{% block scripts %}
<script>
	var KTChartsWidget36 = function() {
	var e = {
			self: null,
			rendered: !1
		},
		t = function(e) {
			var t = document.getElementById("kt_charts_widget_36");
			if (t) {
				var a = parseInt(KTUtil.css(t, "height")),
					l = KTUtil.getCssVariableValue("--kt-gray-500"),
					r = KTUtil.getCssVariableValue("--kt-border-dashed-color"),
					o = KTUtil.getCssVariableValue("--kt-danger"),
					i = KTUtil.getCssVariableValue("--kt-danger"),
					s = KTUtil.getCssVariableValue("--kt-success"),
					n = {
						series: [{

							name: "Amount of  Income",
							data: [
							{% for income_transaction in income_transactions.values %}
							{{ income_transaction }},
							{% endfor %}
							]
						}, {
							name: "Amount of Disposal",
							data: [
							{% for expenses_transaction in expenses_transactions.values %}
							{{ expenses_transaction }},
							{% endfor %}
							]
						}],
						chart: {
							fontFamily: "inherit",
							type: "area",
							height: a,
							toolbar: {
								show: !1
							}
						},
						plotOptions: {},
						legend: {
							show: !1
						},
						dataLabels: {
							enabled: !1
						},
						fill: {
							type: "gradient",
							gradient: {
								shadeIntensity: 1,
								opacityFrom: .4,
								opacityTo: .2,
								stops: [15, 120, 100]
							}
						},
						stroke: {
							curve: "smooth",
							show: !0,
							width: 3,
							colors: [o, s]
						},
						xaxis: {
							categories: ["",
							{% for income_transaction in income_transactions.keys %}
							"{{income_transaction}}",
							{% endfor %}
							],
							axisBorder: {
								show: !1
							},
							axisTicks: {
								show: !1
							},
							tickAmount: 6,
							labels: {
								rotate: 0,
								rotateAlways: !0,
								style: {
									colors: l,
									fontSize: "12px"
								}
							},
							crosshairs: {
								position: "front",
								stroke: {
									color: [o, s],
									width: 1,
									dashArray: 3
								}
							},
							tooltip: {
								enabled: !0,
								formatter: void 0,
								offsetY: 0,
								style: {
									fontSize: "12px"
								}
							}
						},
						yaxis: {
							max: {{ max_transaction }},
							min: 0,
							tickAmount: 6,
							labels: {
								style: {
									colors: l,
									fontSize: "12px"
								}
							}
						},
						states: {
							normal: {
								filter: {
									type: "none",
									value: 0
								}
							},
							hover: {
								filter: {
									type: "none",
									value: 0
								}
							},
							active: {
								allowMultipleDataPointsSelection: !1,
								filter: {
									type: "none",
									value: 0
								}
							}
						},
						tooltip: {
							style: {
								fontSize: "12px"
							}
						},
						colors: [i, KTUtil.getCssVariableValue("--kt-success")],
						grid: {
							borderColor: r,
							strokeDashArray: 4,
							yaxis: {
								lines: {
									show: !0
								}
							}
						},
						markers: {
							strokeColor: [o, s],
							strokeWidth: 3
						}
					};
				e.self = new ApexCharts(t, n), setTimeout((function() {
					e.self.render(), e.rendered = !0
				}), 200)
			}
		};
	return {
		init: function() {
			t(e), KTThemeMode.on("kt.thememode.change", (function() {
				e.rendered && e.self.destroy(), t(e)
			}))
		}
	}
}();
KTChartsWidget36.init()
</script>
<script>
	var KTChartsWidget20 = function() {
	var e = {
			self: null,
			rendered: !1
		},
		t = function(e) {
			var t = document.getElementById("kt_charts_widget_20");
			if (t) {
				var a = parseInt(KTUtil.css(t, "height")),
					l = KTUtil.getCssVariableValue("--kt-gray-500"),
					r = KTUtil.getCssVariableValue("--kt-border-dashed-color"),
					o = KTUtil.getCssVariableValue("--kt-primary"),
					i = KTUtil.getCssVariableValue("--kt-primary"),
					s = {
						series: [{
							name: t.getAttribute("data-kt-chart-info"),
							data: [
							{% for order in order_val_dict.values %}
 							"{{ order }}",
 							{% endfor %}
							]
						}],
						chart: {
							fontFamily: "inherit",
							type: "area",
							height: a,
							toolbar: {
								show: !1
							}
						},
						plotOptions: {},
						legend: {
							show: !1
						},
						dataLabels: {
							enabled: !1
						},
						fill: {
							type: "gradient",
							gradient: {
								shadeIntensity: 1,
								opacityFrom: .4,
								opacityTo: 0,
								stops: [0, 80, 100]
							}
						},
						stroke: {
							curve: "smooth",
							show: !0,
							width: 3,
							colors: [i]
						},
						xaxis: {
							categories: ["",
							{% for order_date in order_val_dict.keys %}
							"{{ order_date }}",
							{% endfor %}
							 ""],
							axisBorder: {
								show: !1
							},
							axisTicks: {
								show: !1
							},
							tickAmount: 6,
							labels: {
								rotate: 0,
								rotateAlways: !0,
								style: {
									colors: l,
									fontSize: "12px"
								}
							},
							crosshairs: {
								position: "front",
								stroke: {
									color: o,
									width: 1,
									dashArray: 3
								}
							},
							tooltip: {
								enabled: !0,
								formatter: void 0,
								offsetY: 0,
								style: {
									fontSize: "12px"
								}
							}
						},
						yaxis: {
							max: {{ max_order }},
							min: 0,
							tickAmount: 6,
							labels: {
								style: {
									colors: l,
									fontSize: "12px"
								},
							}
						},
						states: {
							normal: {
								filter: {
									type: "none",
									value: 0
								}
							},
							hover: {
								filter: {
									type: "none",
									value: 0
								}
							},
							active: {
								allowMultipleDataPointsSelection: !1,
								filter: {
									type: "none",
									value: 0
								}
							}
						},
						tooltip: {
							style: {
								fontSize: "12px"
							},
							y: {
							}
						},
						colors: [i],
						grid: {
							borderColor: r,
							strokeDashArray: 4,
							yaxis: {
								lines: {
									show: !0
								}
							}
						},
						markers: {
							strokeColor: o,
							strokeWidth: 3
						}
					};
				e.self = new ApexCharts(t, s), setTimeout((function() {
					e.self.render(), e.rendered = !0
				}), 200)
			}
		};
	return {
		init: function() {
			t(e), KTThemeMode.on("kt.thememode.change", (function() {
				e.rendered && e.self.destroy(), t(e)
			}))
		}
	}
}();
KTChartsWidget20.init()
</script>
<script>
$(function() {
    var start = moment().startOf('month');
    var end = moment();

    function cb(start, end) {
        $('#reportrange span').html(start.format('DD.MM.YYYY') + ' - ' + end.format('DD.MM.YYYY'));
    }

    $('#reportrange').daterangepicker({
        startDate: start,
        endDate: end,
        locale: {
            format: 'MM.DD.YYYY',
            },
        ranges: {
           'Last 7 Days': [moment().subtract(6, 'days'), moment()],
           'Last 30 Days': [moment().subtract(29, 'days'), moment()],
           'This Month': [moment().startOf('month'), moment().endOf('month')],
           'Last Month': [moment().subtract(1, 'month').startOf('month'), moment().subtract(1, 'month').endOf('month')]
        }
    }, cb);
    cb(start, end);
});
</script>
<script>
    $('#reportrange').on('apply.daterangepicker', function(ev, picker) {
    window.location.href = "/" + "dashboard" + "/" + picker.startDate.format('DD.MM.YYYY') + "-" + picker.endDate.format('DD.MM.YYYY') + "/"
            });
</script>
{% endblock scripts %}